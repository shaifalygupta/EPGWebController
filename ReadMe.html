<p><strong><span style="text-decoration: underline;">Main.go</span></strong></p>
<p style="padding-left: 30px;">/**<br />Main Router file to handle all the request based on URI .<br />This file used gorilla/mux package for parameter substitution in the URL .<br />This Supports GET &amp; POST Http Method .<br />Sample Urls for Reference<br />http://localhost:8081/EPG/csv<br />http://localhost:8081/EPG/csv/USA<br />http://localhost:8081/EPG/csv/USA/MTV</p>
<p style="padding-left: 30px;">POST : http://localhost:8081/EPG/csv<br />{"ID": "120015","Name":" Test Series","Type":"Program","SubType":"Episode","Duration":1800,"SourceSystem":"P33","Country":"USA","Channel":"MTV"}</p>
<p style="padding-left: 30px;">http://localhost:8081/EPG/mock<br />http://localhost:8081/EPG/mock/USA<br />http://localhost:8081/EPG/mock/USA/MTV</p>
<p style="padding-left: 30px;">POST : http://localhost:8081/EPG/mock<br />{"ID": "120015","Name":" Test Series","Type":"Program","SubType":"Episode","Duration":1800,"SourceSystem":"P33","Country":"USA","Channel":"MTV"}<br /> */</p>
<p style="text-align: left;"><span style="padding-left: 30px; color: #0000ff;"><em><strong>func handleRequests()</strong></em><br /> </span><br /><strong><span style="text-decoration: underline;">FUNCTIONS in EPGHandler.go</span></strong></p>
<p style="padding-left: 30px;">/***<br />It is used to provide the handler functions to process the API request .<br />It also prepare json response based on EPGData returned from Backend i.e. Mock , CSV or other implementation.<br /> */</p>
<p><em><span style="color: #0000ff;"><strong>func CreateEPGData(w http.ResponseWriter, r *http.Request)</strong></span></em></p>
<p><em><span style="color: #0000ff;"><strong>func FetchEPGByCountry(w http.ResponseWriter, r *http.Request)</strong></span></em></p>
<p><em><span style="color: #0000ff;"><strong>func FetchEPGBychannel(w http.ResponseWriter, r *http.Request)</strong></span></em></p>
<p><em><span style="color: #0000ff;"><strong>func FetchEPGData(w http.ResponseWriter, r *http.Request)</strong></span></em></p>
<p>&nbsp;</p>
<p><strong><span style="text-decoration: underline;">Functions , Types in IEPGService.go</span></strong></p>
<p style="padding-left: 30px;"><strong><span style="text-decoration: underline;">TYPES</span></strong><br />/**<br /> This structure is used to POST or GET information related to EPG Json<br /> tags are used to map the json property name with strut properties.<br /> [{"id":"120013","name":" Test<br /> Series","type":"Program","subtype":"Episode","duration":1800,"sourcesystem":"P33","country":"USA","channel":"MTV"}]<br />**/</p>
<p style="padding-left: 30px;"><strong><span style="color: #0000ff;">type EPGData struct {</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; ID string `json:"id"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; Name string `json:"name"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; Type string `json:"type"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; SubType string `json:"subtype"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; Duration int `json:"duration"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; SourceSystem string `json:"sourcesystem"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; Country string `json:"country"`</span></strong><br /><strong><span style="color: #0000ff;">&nbsp; Channel string `json:"channel"`</span></strong><br /><strong><span style="color: #0000ff;">}</span></strong></p>
<p><strong><span style="color: #0000ff;">&nbsp; &nbsp; &nbsp; &nbsp; type EPGDataList []EPGData</span></strong></p>
<p style="padding-left: 30px;">/**<br /> This interface is used to support the EPG Functionality EPG only<br /> supports the functions mentioned in the Interface<br /> */</p>
<p style="padding-left: 30px;"><br /><strong><em><span style="color: #0000ff;">type EPGInterface interface {</span></em></strong><br /><strong><em><span style="color: #0000ff;">&nbsp; &nbsp;fetchAllData() EPGDataList</span></em></strong><br /><strong><em><span style="color: #0000ff;">&nbsp; &nbsp;fetchEPGByCountry() EPGDataList</span></em></strong><br /><strong><em><span style="color: #0000ff;">&nbsp; &nbsp;fetchEPGBychannel() EPGDataList</span></em></strong><br /><strong><em><span style="color: #0000ff;">&nbsp; &nbsp;CreateEPGData(data EPGData) EPGDataList</span></em></strong><br /><strong><em><span style="color: #0000ff;">}</span></em></strong></p>
<p>/**<br />&nbsp; &nbsp; this function is used call the concrete function (CreateEPGData) based<br />&nbsp; &nbsp; on Type i.e csvreceiver or mock receiver<br /> **/<br /><em><strong><span style="color: #0000ff;">func ICreateEPGDataProxy(epgInterface EPGInterface, data EPGData) EPGDataList</span></strong></em></p>
<p>/**<br />&nbsp; this function is used call the concrete function(fetchAllData) based<br />&nbsp; on Type i.e csvreceiver or mock receiver</p>
<p>**/<br /><em><strong><span style="color: #0000ff;">func IfetchAllDataProxy(epgInterface EPGInterface) EPGDataList</span></strong></em></p>
<p>/**<br />&nbsp; this function is used call the concrete function (fetchEPGByCountry)<br />&nbsp; based on Type i.e csvreceiver or mock receiver<br />* /<br /><em><strong><span style="color: #0000ff;">func IfetchEPGByCountryProxy(epgInterface EPGInterface) EPGDataList</span></strong></em><br /> <br /> /**<br />&nbsp; this function is used call the concrete function (fetchEPGBychannel)<br />&nbsp; based on Type i.e csvreceiver or mock receiver<br /> */</p>
<p><em><strong><span style="color: #0000ff;">func IfetchEPGBychannelProxy(epgInterface EPGInterface) EPGDataList</span></strong></em></p>
<p><strong><span style="text-decoration: underline;">Implementaion of Interfaces</span></strong></p>
<p>1. <span style="color: #0000ff;">CSVEPGServiceIMPL.go</span> : This Go file is the concrete implementation of EPGInteface functions<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This implementation is used to read data from csv file.<br /> <br />2. <span style="color: #0000ff;">MockEPGServiceIMPL.go</span> : This Go file is the concrete implementation of EPGInteface functions<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This implementation is used to return mock data .</p>
<p><span style="text-decoration: underline;"><strong>Unit Test Sample</strong></span></p>
<p>1. <span style="color: #0000ff;">PGServiceIMPL_test.go</span> : This GO file is used for Unit test cases .<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; It used the existing Go package : "testing"</p>
<p>&nbsp;</p>